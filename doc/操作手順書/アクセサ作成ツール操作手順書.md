# アクセサ作成ツール操作手順書

## 1. 概要

アクセサ作成ツールは、Java クラスのフィールド定義からアクセサメソッド（getter および setter）を自動生成するためのツールである。

### 主な機能

- フィールド定義からアクセサメソッドの自動生成
- テンプレートベースの柔軟な出力形式
- Javadoc コメントの自動付与
- 中間ファイルを経由した安全な処理

## 2. ファイル配置

### 2.1 ディレクトリ構造

```text
kmg-tool/
├── work/io/                          # 優先パス（開発時推奨）
│   ├── input.txt                     # 入力ファイル
│   ├── output.txt                    # 出力ファイル
│   └── template/
│       └── AccessorCreationTool.yml  # テンプレートファイル
└── src/main/resources/tool/io/       # 代替パス
    ├── input.txt                     # 入力ファイル
    ├── output.txt                    # 出力ファイル
    └── template/
        └── AccessorCreationTool.yml  # テンプレートファイル
```

### 2.2 ファイルパスの優先順位

1. **優先パス**: `work/io/` ディレクトリが存在する場合
2. **代替パス**: `work/io/` ディレクトリが存在しない場合、`src/main/resources/tool/io/` を使用

## 3. 入力ファイルの準備

### 3.1 入力ファイル形式

入力ファイル（`input.txt`）は Java フィールド定義形式でフィールド定義を記述する：

```text
/** フィールドのコメント */
アクセス修飾子 データ型 フィールド名;
```

### 3.2 入力ファイル例

```text
/** フィールドのコメント */
private String comment;

/** フィールド名 */
private String field;

/** フィールドの型 */
private String type;
```

### 3.3 入力ファイルの注意事項

- Javadoc コメント（`/** */`）でフィールドの説明を記述する
- データ型は完全修飾名または短縮名で記述可能である
- フィールド名はキャメルケースで記述する
- セミコロン（`;`）で終了する
- 空行は無視される

## 4. テンプレートファイルの設定

### 4.1 テンプレートファイルの場所

- **優先パス**: `work/io/template/AccessorCreationTool.yml`
- **代替パス**: `src/main/resources/tool/io/template/AccessorCreationTool.yml`

### 4.2 テンプレートファイルの設定方法

テンプレートファイルの詳細な構造や設定方法については、実際のテンプレートファイル（`AccessorCreationTool.yml`）を参照してください。テンプレートファイルには、プレースホルダーの定義やテンプレート内容の設定方法が記載されています。

## 5. 実行手順

### 5.1 基本的な実行方法

1. **入力ファイルの準備**

   ```bash
   # work/ioディレクトリを作成（存在しない場合）
   mkdir -p work/io

   # 入力ファイルを作成
   cat > work/io/input.txt << 'EOF'
   /** フィールドのコメント */
   private String comment;

   /** フィールド名 */
   private String field;

   /** フィールドの型 */
   private String type;
   EOF
   ```

2. **テンプレートファイルの配置**

   ```bash
   # テンプレートディレクトリを作成
   mkdir -p work/io/template

   # テンプレートファイルをコピー
   cp src/main/resources/tool/io/template/AccessorCreationTool.yml work/io/template/
   ```

3. **ツールの実行**

   ```bash
   # Mavenを使用して実行
   mvn exec:java -Dexec.mainClass="kmg.tool.acccrt.presentation.ul.cli.AccessorCreationTool"

   # または、JARファイルから実行
   java -cp target/classes:target/dependency/* kmg.tool.acccrt.presentation.ul.cli.AccessorCreationTool
   ```

### 5.2 コマンドライン引数

現在のバージョンでは、コマンドライン引数は使用されない。ファイルパスは自動的に決定される。

### 5.3 実行時のログ出力

実行時には以下のようなログが出力される：

```text
[INFO] アクセサ作成ツール開始
[INFO] 入力ファイル: work/io/input.txt
[INFO] テンプレートファイル: work/io/template/AccessorCreationTool.yml
[INFO] 出力ファイル: work/io/output.txt
[INFO] 処理完了: 3件のフィールドを処理しました
[INFO] アクセサ作成ツール終了
```

## 6. 出力ファイルの確認

### 6.1 出力ファイルの場所

- **優先パス**: `work/io/output.txt`
- **代替パス**: `src/main/resources/tool/io/output.txt`

### 6.2 出力例

入力ファイルの例に対して、以下のような出力が生成される：

```java
/**
 * フィールドのコメントを設定する<br>
 * @author KenichiroArai
 * @since 0.1.0
 * @param comment フィールドのコメント
 */
public void setComment(String comment) {
    this.comment = comment;
}

/**
 * フィールドのコメントを返す<br>
 * @author KenichiroArai
 * @since 0.1.0
 * @return フィールドのコメント
 */
public String getComment() {
    String result = this.comment;
    return result;
}

/**
 * フィールド名を設定する<br>
 * @author KenichiroArai
 * @since 0.1.0
 * @param field フィールド名
 */
public void setField(String field) {
    this.field = field;
}

/**
 * フィールド名を返す<br>
 * @author KenichiroArai
 * @since 0.1.0
 * @return フィールド名
 */
public String getField() {
    String result = this.field;
    return result;
}

/**
 * フィールドの型を設定する<br>
 * @author KenichiroArai
 * @since 0.1.0
 * @param type フィールドの型
 */
public void setType(String type) {
    this.type = type;
}

/**
 * フィールドの型を返す<br>
 * @author KenichiroArai
 * @since 0.1.0
 * @return フィールドの型
 */
public String getType() {
    String result = this.type;
    return result;
}
```

## 7. トラブルシューティング

### 7.1 よくあるエラーと対処法

#### エラー: 入力ファイルが見つからない

```text
[ERROR] 入力ファイルが見つかりません: work/io/input.txt
```

**対処法**:

- 入力ファイルが正しい場所に配置されているか確認
- ファイル名が `input.txt` になっているか確認
- ファイルの読み取り権限があるか確認

#### エラー: テンプレートファイルが見つからない

```text
[ERROR] テンプレートファイルが見つかりません: work/io/template/AccessorCreationTool.yml
```

**対処法**:

- テンプレートファイルが正しい場所に配置されているか確認
- ファイル名が `AccessorCreationTool.yml` になっているか確認
- YAML ファイルの構文が正しいか確認

#### エラー: 入力ファイルの形式が正しくない

```text
[ERROR] 行番号 3: フィールド定義の形式が正しくありません
```

**対処法**:

- 各行が「`/** コメント */`」と「`アクセス修飾子 データ型 フィールド名;`」の 2 行で構成されているか確認
- 空行や不正な文字が含まれていないか確認
- Javadoc コメントが正しく記述されているか確認（`/**` で開始、`*/` で終了）
- セミコロン（`;`）で終了しているか確認

### 7.2 ログファイルの確認

詳細なエラー情報は以下のログファイルで確認できる：

- `logs/kmg-tool/kmg-tool.log`
- `logs/exceptions/kmg-core-exceptions.log`

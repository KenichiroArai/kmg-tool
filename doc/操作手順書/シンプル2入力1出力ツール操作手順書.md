# シンプル 2 入力 1 出力ツール操作手順書

## 1. 概要

シンプル 2 入力 1 出力ツールは、1 つの入力ファイルと 1 つのテンプレートファイルから 1 つの出力ファイルへの変換処理を行うツールだ。シンプルシリーズはサンプルとしての意味合いも持ち、ツール作成時の参考とすることができる。

### 主な機能

- 入力ファイルの各行をテンプレートに適用して出力ファイルを生成
- テンプレート内のプレースホルダー（`{ name }`）を入力データで置換
- 中間ファイルを経由した安全な処理
- ファイルパスの自動決定機能

## 2. ファイル配置

### 2.1 ディレクトリ構造

```text
kmg-tool/
├── work/io/                                  # 優先パス（開発時推奨）
│   ├── input.txt                             # 入力ファイル
│   ├── template/
│   │   └── SimpleTwo2OneTool.yml             # テンプレートファイル
│   └── output.txt                            # 出力ファイル
└── src/main/resources/tool/io/               # 代替パス
    ├── input.txt                             # 入力ファイル
    ├── template/
    │   └── SimpleTwo2OneTool.yml             # テンプレートファイル
    └── output.txt                            # 出力ファイル
```

### 2.2 ファイルパスの優先順位

1. **優先パス**: `work/io/` ディレクトリが存在する場合
2. **代替パス**: `work/io/` ディレクトリが存在しない場合、`src/main/resources/tool/io/` を使用

## 3. 入力ファイルの準備

### 3.1 入力ファイル形式

入力ファイル（`input.txt`）は任意のテキスト形式で内容を記述する：

```text
任意のテキスト内容
複数行の内容も対応
```

### 3.2 入力ファイル例

```text
User
Product
Order
```

### 3.3 入力ファイルの注意事項

- 任意のテキスト内容を記述可能である
- 複数行の内容も対応している
- 空のファイルでも処理可能である
- 各行がテンプレートのプレースホルダーに置換される

## 4. テンプレートファイルの準備

### 4.1 テンプレートファイル形式

テンプレートファイル（`SimpleTwo2OneTool.yml`）は YAML 形式で以下の構造を持つ：

```yaml
templateContent: |
  テンプレートの内容
  { name } プレースホルダーが入力行で置換される
```

### 4.2 テンプレートファイル例

```yaml
templateContent: |
  /**
   * { name }の処理
   *
   * @since 0.1.0
   */
  public void process{ name }() {
      // { name }の処理ロジック
  }
```

### 4.3 テンプレートファイルの注意事項

- YAML 形式で記述する
- `templateContent` セクションでテンプレート内容を定義
- `{ name }` プレースホルダーが入力ファイルの各行の内容に置換される
- テンプレートは入力ファイルの各行に対して適用される

## 5. 実行手順

### 5.1 基本的な実行方法

1. **入力ファイルの準備**

   ```bash
   # work/ioディレクトリを作成（存在しない場合）
   mkdir -p work/io

   # 入力ファイルを作成
   cat > work/io/input.txt << 'EOF'
   User
   Product
   Order
   EOF
   ```

2. **テンプレートファイルの準備**

   ```bash
   # work/io/templateディレクトリを作成（存在しない場合）
   mkdir -p work/io/template

   # テンプレートファイルを作成
   cat > work/io/template/SimpleTwo2OneTool.yml << 'EOF'
   templateContent: |
     /**
      * { name }の処理
      *
      * @since 0.1.0
      */
     public void process{ name }() {
         // { name }の処理ロジック
     }
   EOF
   ```

3. **ツールの実行**

   ```bash
   # Mavenを使用して実行
   mvn exec:java -Dexec.mainClass="kmg.tool.simple.presentation.ui.cli.SimpleTwo2OneTool"

   # または、JARファイルから実行
   java -cp target/classes:target/dependency/* kmg.tool.simple.presentation.ui.cli.SimpleTwo2OneTool
   ```

### 5.2 コマンドライン引数

現在のバージョンでは、コマンドライン引数は使用されない。ファイルパスは自動的に決定される。

### 5.3 実行時のログ出力

実行時には以下のようなログが出力される：

```text
[INFO] シンプル2入力ファイルから1出力ファイルへの変換ツール開始
[INFO] 入力ファイル: work/io/input.txt
[INFO] テンプレートファイル: work/io/template/SimpleTwo2OneTool.yml
[INFO] 出力ファイル: work/io/output.txt
[INFO] 処理完了: 入力ファイルとテンプレートから出力ファイルを生成しました
[INFO] シンプル2入力ファイルから1出力ファイルへの変換ツール終了
```

## 6. 出力ファイルの確認

### 6.1 出力ファイルの場所

- **優先パス**: `work/io/output.txt`
- **代替パス**: `src/main/resources/tool/io/output.txt`

### 6.2 出力例

上記の入力ファイルとテンプレートファイルの例に対して、以下のような出力が生成される：

```java
/**
 * Userの処理
 *
 * @since 0.1.0
 */
public void processUser() {
    // Userの処理ロジック
}

/**
 * Productの処理
 *
 * @since 0.1.0
 */
public void processProduct() {
    // Productの処理ロジック
}

/**
 * Orderの処理
 *
 * @since 0.1.0
 */
public void processOrder() {
    // Orderの処理ロジック
}
```

### 6.3 出力ファイルの特徴

- 入力ファイルの各行に対してテンプレートが適用される
- テンプレート内の `{ name }` プレースホルダーが入力行の内容で置換される
- 各行の処理結果が連結されて最終的な出力ファイルが生成される
- 空の入力ファイルの場合は空の出力ファイルが生成される

# メッセージの種類作成ツール操作手順書

## 1. 概要

メッセージの種類作成ツールは、メッセージの種類を定義する列挙型を作成するためのツールである。

### 主な機能

- メッセージ種類定義から Java 列挙型定義の自動生成
- テンプレートベースの柔軟な出力形式
- Javadoc コメントの自動付与
- 中間ファイルを経由した安全な処理

## 2. ファイル配置

### 2.1 ディレクトリ構造

```text
kmg-tool/
├── work/io/                                      # 優先パス（開発時推奨）
│   ├── input.txt                                 # 入力ファイル
│   ├── output.txt                                # 出力ファイル
│   └── template/
│       └── MessageTypesCreationTool.yml          # テンプレートファイル
└── src/main/resources/tool/io/                   # 代替パス
    ├── input.txt                                 # 入力ファイル
    ├── output.txt                                # 出力ファイル
    └── template/
        └── MessageTypesCreationTool.yml          # テンプレートファイル
```

### 2.2 ファイルパスの優先順位

1. **優先パス**: `work/io/` ディレクトリが存在する場合
2. **代替パス**: `work/io/` ディレクトリが存在しない場合、`src/main/resources/tool/io/` を使用

## 3. 入力ファイルの準備

### 3.1 入力ファイル形式

入力ファイル（`input.txt`）はメッセージの種類定義形式でメッセージ種類を記述する：

```text
項目=項目名
```

### 3.2 入力ファイル例

```text
KMGTOOL_GEN14000=メッセージの種類が指定されていません。
KMGTOOL_GEN14001=項目が指定されていません。
KMGTOOL_GEN14002=メッセージの種類定義の形式が正しくありません。行番号：{0}、内容：{1}
KMGTOOL_GEN14003=ファイルの読み込みに失敗しました。ファイルパス：{0}
KMGTOOL_GEN14004=テンプレートの処理中にエラーが発生しました。
```

### 3.3 入力ファイルの注意事項

- 各行は「項目=項目名」の形式で記述する
- 項目は英数字とアンダースコアで構成される（例：KMGTOOL_GEN14000）
- 項目名は日本語の説明文で記述する
- プレースホルダー（{0}、{1}など）を含むことができる
- 空行は無視される
- 等号（=）で項目と項目名を分割する

## 4. テンプレートファイルの設定

### 4.1 テンプレートファイルの場所

- **優先パス**: `work/io/template/MessageTypesCreationTool.yml`
- **代替パス**: `src/main/resources/tool/io/template/MessageTypesCreationTool.yml`

### 4.2 テンプレートファイルの設定方法

テンプレートファイルの詳細な構造や設定方法については、実際のテンプレートファイル（`MessageTypesCreationTool.yml`）を参照してください。テンプレートファイルには、プレースホルダーの定義やテンプレート内容の設定方法が記載されています。

## 5. 実行手順

### 5.1 基本的な実行方法

1. **入力ファイルの準備**

   ```bash
   # work/ioディレクトリを作成（存在しない場合）
   mkdir -p work/io

   # 入力ファイルを作成
   cat > work/io/input.txt << 'EOF'
   KMGTOOL_GEN14000=メッセージの種類が指定されていません。
   KMGTOOL_GEN14001=項目が指定されていません。
   KMGTOOL_GEN14002=メッセージの種類定義の形式が正しくありません。行番号：{0}、内容：{1}
   EOF
   ```

2. **テンプレートファイルの配置**

   ```bash
   # テンプレートディレクトリを作成
   mkdir -p work/io/template

   # テンプレートファイルをコピー
   cp src/main/resources/tool/io/template/MessageTypesCreationTool.yml work/io/template/
   ```

3. **ツールの実行**

   ```bash
   # Mavenを使用して実行
   mvn exec:java -Dexec.mainClass="kmg.tool.msgtpcrt.presentation.ul.cli.MessageTypesCreationTool"

   # または、JARファイルから実行
   java -cp target/classes:target/dependency/* kmg.tool.msgtpcrt.presentation.ul.cli.MessageTypesCreationTool
   ```

### 5.2 コマンドライン引数

現在のバージョンでは、コマンドライン引数は使用されない。ファイルパスは自動的に決定される。

### 5.3 実行時のログ出力

実行時には以下のようなログが出力される：

```text
[INFO] メッセージの種類作成ツール開始
[INFO] 入力ファイル: work/io/input.txt
[INFO] テンプレートファイル: work/io/template/MessageTypesCreationTool.yml
[INFO] 出力ファイル: work/io/output.txt
[INFO] 処理完了: 3件のメッセージ種類を処理しました
[INFO] メッセージの種類作成ツール終了
```

## 6. 出力ファイルの確認

### 6.1 出力ファイルの場所

- **優先パス**: `work/io/output.txt`
- **代替パス**: `src/main/resources/tool/io/output.txt`

### 6.2 出力例

入力ファイルの例に対して、以下のような出力が生成される：

```java
/**
 * メッセージの種類が指定されていません。
 *
 * @since 0.1.0
 */
KMGTOOL_GEN14000("メッセージの種類が指定されていません。"),

/**
 * 項目が指定されていません。
 *
 * @since 0.1.0
 */
KMGTOOL_GEN14001("項目が指定されていません。"),

/**
 * メッセージの種類定義の形式が正しくありません。行番号：{0}、内容：{1}
 *
 * @since 0.1.0
 */
KMGTOOL_GEN14002("メッセージの種類定義の形式が正しくありません。行番号：{0}、内容：{1}"),

/**
 * ファイルの読み込みに失敗しました。ファイルパス：{0}
 *
 * @since 0.1.0
 */
KMGTOOL_GEN14003("ファイルの読み込みに失敗しました。ファイルパス：{0}"),

/**
 * テンプレートの処理中にエラーが発生しました。
 *
 * @since 0.1.0
 */
KMGTOOL_GEN14004("テンプレートの処理中にエラーが発生しました。"),
```
